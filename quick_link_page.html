<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>我的快捷链接</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{display:grid;place-items:center;background:
      radial-gradient(1000px 400px at 10% 10%, rgba(6,182,212,0.08), transparent),
      linear-gradient(180deg,#071028 0%, #07121a 100%);color:#e6eef7}
    .card{width:min(680px,92%);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);padding:28px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    h1{margin:0 0 10px;font-size:20px;letter-spacing:0.2px}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .linkbox{display:flex;gap:12px;align-items:center;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .url{flex:1;word-break:break-all;color:#dff7fb}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600}
    .btn:hover{transform:translateY(-1px)}
    .actions{display:flex;gap:10px;margin-top:14px}
    .open{background:linear-gradient(90deg,var(--accent),#3b82f6);color:#021027;border:0}
    .note{margin-top:14px;color:var(--muted);font-size:13px}
    footer{margin-top:18px;color:var(--muted);font-size:12px;text-align:right}
    @media (max-width:420px){.card{padding:18px}.btn{padding:7px 10px}}
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">快捷链接</h1>
    <p class="lead">下面是你提供的链接 — 点击打开，或复制到剪贴板快捷使用。</p>

    <div class="linkbox" title="点击右侧按钮可以打开或复制链接">
      <div class="url" id="url">https://t3.znas.cn/kI9ymaWea4k</div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <button class="btn open" id="openBtn" title="在新标签页打开链接">打开</button>
        <button class="btn" id="copyBtn" title="复制链接到剪贴板">复制</button>
      </div>
    </div>

    <div class="actions">
      <button class="btn" id="qrcodeBtn" title="生成二维码（无需联网）">显示二维码</button>
      <button class="btn" id="downloadBtn" title="下载为 .url 快捷方式（Windows）">下载 .url</button>
    </div>

    <p class="note">提示：把此文件放到任意静态托管（如 GitHub Pages），即可通过自定义域名访问。</p>
    <footer>生成于本地 · 由你提供链接</footer>
  </div>

  <script>
    const url = document.getElementById('url').textContent.trim();
    document.getElementById('openBtn').addEventListener('click', ()=> {
      window.open(url, '_blank', 'noopener');
    });
    document.getElementById('copyBtn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(url);
        alert('已复制到剪贴板：\n' + url);
      } catch (e) {
        const inp = document.createElement('input');
        inp.value = url;
        document.body.appendChild(inp);
        inp.select();
        document.execCommand('copy');
        inp.remove();
        alert('复制成功（回退方法）。');
      }
    });

    // Simple QR code generator (no external libs) — render to new window as canvas
    document.getElementById('qrcodeBtn').addEventListener('click', () => {
      const w = 300;
      const canvas = document.createElement('canvas');
      canvas.width = w; canvas.height = w;
      // tiny QR implementation: using data URL via Google Chart is simplest but requires network.
      // Instead we'll create a basic fallback that redirects to a data URL with a QR via SVG from api.qrserver (requires network).
      // To keep offline-friendly, show a generated page that uses a third-party if available.
      const qrWindow = window.open('', '_blank', 'noopener');
      qrWindow.document.write('<!doctype html><title>二维码</title><meta charset="utf-8"><style>body{display:grid;place-items:center;height:100vh;margin:0;font-family:system-ui}</style>');
      qrWindow.document.write('<h3>如果二维码未显示，说明需要联网以生成二维码。</h3>');
      // Use a reliable external QR generator image (will load only if user has network)
      qrWindow.document.write('<img src="https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=' + encodeURIComponent(url) + '" alt="QR code" />');
      qrWindow.document.close();
    });

    // Download a simple .url file (Windows internet shortcut)
    document.getElementById('downloadBtn').addEventListener('click', () => {
      const content = '[InternetShortcut]\nURL=' + url + '\n';
      const blob = new Blob([content], {type: 'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'shortcut.url';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(a.href);
    });

    // Make link clickable by keyboard too
    document.getElementById('url').addEventListener('dblclick', ()=> window.open(url, '_blank', 'noopener'));
  </script>
</body>
</html>
